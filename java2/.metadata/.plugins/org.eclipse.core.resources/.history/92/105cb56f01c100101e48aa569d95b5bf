package chap9;
import java.util.*;

interface Account {
	void deposit(double amount);
	boolean withdraw(double amount);
	double calculateInterest();
	double getBalances();
	
	String getAccountNumber();
}

class SavingsAccount implements Account {
	private double balance;
	private String accountNumber;
	private double interestRate; 
	
	public SavingsAccount(String accNum, double initialBalance, double rate) {
		this.accountNumber = accNum;
		this.balance = initialBalance;
		this.interestRate = rate;
	}
	
	@Override 
	public String getAccountNumber() {
		return this.accountNumber;
	}
	
	public double getBalance() {
		return this.balance;
	}
	
	public void deposit(double amount) {
		if (amount > 0) {
			this.balance += amount;
			System.out.println("Send " + amount + " to " + this.accountNumber + ". New balance: " + this.balance);
		}
	}
	
	public boolean withdraw(double amount) {
		if (amount > 0 && amount <= (this.balance + this.overdraftLimit)) {
			this.balance -= amount;
			System.out.println("Withdrew " + amount + " from " + this.accountNumber + ". New balance: " + this.balance);
			if (this.balance < 0) {
                System.out.println("    (WARNING: Overdraft is in use!)");
            }
            return true;
		} else {
			System.out.println("Withdrawal from " + this.accountNumber + " failed (overdraft limit exceeded).");
			return false; 
		}
	}
	
	public double calculateInterest() {
        return this.balance * this.interestRate;
    }
}

class CurrentAccount implements Account {
	private double balance;
	private String accountNumber;
	private double overdraftLimit;
	
	public CurrentAccount(String accNum, double initialBalance, double limit) {
		this.accountNumber = accNum;
		this.balance = initialBalance;
		this.overdraftLimit = limit;
	}
	
	@Override
	public String getAccountNumber() {
		return this.accountNumber;
	}
	
	public double getBalance() {
		return this.balance; 
	}
	
	public void deposit(double amount) {
		if(amount > 0) {
			this.balance += amount;
			System.out.println("Deposited " + amount + " into " + this.accountNumber + ". New balance: " + this.balance);
		}
	}
	
	public boolean withdraw(double amount) {
		if (amount > 0 && amount <= (this.balance + this.overdraftLimit)) {
			this.balance -= amount;
			System.out.println("Withdraw " + amount + " from " + this.accountNumber + ". New balance: " + this.balance);
			if (this.balance < 0) {
				System.out.println("    (WARNING: Overdraft is in use!)");
			}
			return true;
		} else {
			System.out.println("Withdrawal from " + this.accountNumber + " failed (overdraft limit exceeded).");
            return false;
		}
	}
	
	public double calculateInterest() {
        return 0; 
    }
}

class Bank {
	private List<Account> accountList;
	
	public Bank() {
		this.accountList = new ArrayList<>();
	}
	
	public void addAccount(Account acc) {
		this.accountList.add(acc);
		System.out.println("New account added: " + acc.getAccountNumber());
	}
	
	public void showAllAccount() {
		System.out.println("Bank Status: ");
		for (Account acc : this.accountList) {
			System.out.println("Account: " + acc.getAccountNumber() + " - Balance: " + acc.getBalance());
		}
	}
}

public class BankingSystemDemo {
	public static void main (String[] args) {
		Bank myBank = new Bank();
		
		Account s1 = new SavingsAccount("S001", 1000, 0.05);
		Account c1 = new CurrentAccount("C001", 500, 200);
		
		myBank.addAccount(s1);
		myBank.addAccount(c1);
		myBank.showAllAccount();
		
		System.out.println("Performing Transaction:");
		s1.deposit(200);
		c1.withdraw(100); 
	}
}